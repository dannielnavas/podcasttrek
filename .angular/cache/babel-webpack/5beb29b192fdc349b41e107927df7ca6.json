{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { EventEmitter } from '@angular/core';\nimport { interval } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/playlist/playlist.service\";\nexport let ActionComponent = /*#__PURE__*/(() => {\n  class ActionComponent {\n    constructor(playlistService) {\n      this.playlistService = playlistService;\n      this.changeCaraturla = new EventEmitter();\n      this.reproductor = new Audio();\n      this.icon = 'fa fa-pause';\n    }\n\n    ngOnInit() {\n      if (this.play) {\n        this.playSong = this.play;\n        this.selectAudio(this.playSong);\n      }\n    } // tslint:disable-next-line: use-lifecycle-interface\n\n\n    ngOnChanges(changes) {\n      // tslint:disable-next-line: forin\n      for (const propName in changes) {\n        console.log(propName);\n      }\n\n      if (this.play) {\n        this.playSong = this.play;\n        this.selectAudio(this.playSong);\n      }\n    }\n\n    caratulaEpisodie(caratula) {\n      this.changeCaraturla.emit(caratula);\n    }\n\n    selectAudio(element, accion) {\n      // this.actual = this.playSong.urlEpisodie;\n      this.getDuration(this.reproductor);\n      const resultado = this.playlistService.referenciaCloudStorage(element.urlEpisodie);\n      resultado.getDownloadURL().subscribe(URL => {\n        console.log('Cancion', URL);\n        this.reproductor.src = URL;\n        this.reproductor.load();\n        this.reproductor.play();\n      });\n      this.reproductor.volume = 40 / 100;\n      this.getSeconds(element.id);\n      accion ? this.play = element : this.play = this.play;\n      this.icon = 'fa fa-pause';\n    }\n\n    getDuration(player) {\n      let d;\n\n      player.onloadedmetadata = () => {\n        this.realDuracion = this.reproductor.duration;\n        let duracion = Math.round(this.reproductor.duration) / 60;\n        duracion = duracion * 100 / 100;\n        d = String(duracion);\n        this.duracion = d.replace('.', ':');\n      };\n    }\n\n    getSeconds(id) {\n      const int = interval(1000);\n      const subscription = int.pipe(switchMap(() => __awaiter(this, void 0, void 0, function* () {\n        return this.reproductor.currentTime;\n      }))).subscribe(val => {\n        this.segundo = val;\n\n        if (this.segundo === this.realDuracion) {\n          this.nextSong(id, true);\n        }\n      });\n    }\n\n    playAndPause() {\n      if (!this.reproductor.paused) {\n        this.reproductor.pause();\n        this.icon = 'fa fa-play';\n      } else {\n        this.reproductor.play();\n        this.icon = 'fa fa-pause';\n      }\n    }\n\n    setTime(event) {\n      this.reproductor.currentTime = event.target.value;\n    }\n\n    volumen(event) {\n      if (this.reproductor.volume > event.target.value / 100) {\n        this.volumenAction = 'volume_down';\n      } else {\n        this.volumenAction = 'volume_up';\n      }\n\n      this.reproductor.volume = event.target.value / 100;\n    }\n\n    nextSong(id, action) {\n      if (this.capitulos.length > id - 1) {\n        if (action) {\n          this.caratulaEpisodie(this.capitulos[id].urlImage);\n          this.selectAudio(this.capitulos[id], true);\n        } else {\n          this.caratulaEpisodie(this.capitulos[id - 2].urlImage);\n          this.selectAudio(this.capitulos[id - 2], true);\n        }\n      }\n    }\n\n  }\n\n  ActionComponent.ɵfac = function ActionComponent_Factory(t) {\n    return new (t || ActionComponent)(i0.ɵɵdirectiveInject(i1.PlaylistService));\n  };\n\n  ActionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ActionComponent,\n    selectors: [[\"app-action\"]],\n    inputs: {\n      play: \"play\",\n      capitulos: \"capitulos\"\n    },\n    outputs: {\n      changeCaraturla: \"changeCaraturla\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 14,\n    vars: 7,\n    consts: [[1, \"container-player\"], [1, \"action-icons\"], [1, \"fa\", \"fa-angle-double-left\", 3, \"click\"], [3, \"click\"], [1, \"fa\", \"fa-angle-double-right\", 3, \"click\"], [1, \"name\"], [\"type\", \"range\", \"min\", \"0\", \"step\", \"1\", \"id\", \"timeline\", 1, \"timeline\", 3, \"max\", \"value\", \"change\"], [1, \"time\"], [1, \"volumen\"], [1, \"fa\", \"fa-volume-down\"], [1, \"slide-volumen\"], [\"type\", \"range\", \"id\", \"volumen\", \"min\", \"1\", \"max\", \"100\", 1, \"volumen-slide\", 3, \"value\", \"change\"]],\n    template: function ActionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"i\", 2);\n        i0.ɵɵlistener(\"click\", function ActionComponent_Template_i_click_2_listener() {\n          return ctx.nextSong(ctx.play.id, false);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"i\", 3);\n        i0.ɵɵlistener(\"click\", function ActionComponent_Template_i_click_3_listener() {\n          return ctx.playAndPause();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"i\", 4);\n        i0.ɵɵlistener(\"click\", function ActionComponent_Template_i_click_4_listener() {\n          return ctx.nextSong(ctx.play.id, true);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"input\", 6);\n        i0.ɵɵlistener(\"change\", function ActionComponent_Template_input_change_6_listener($event) {\n          return ctx.setTime($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵelement(11, \"i\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 10);\n        i0.ɵɵelementStart(13, \"input\", 11);\n        i0.ɵɵlistener(\"change\", function ActionComponent_Template_input_change_13_listener($event) {\n          return ctx.volumen($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵclassMap(ctx.icon);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"max\", ctx.realDuracion)(\"value\", ctx.segundo);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.play.title, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.play.duration, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", 50);\n      }\n    },\n    styles: [\".container-player[_ngcontent-%COMP%]{height:120px;width:100%;background-color:#282828;position:fixed;bottom:0;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center}.action-icons[_ngcontent-%COMP%]{height:auto;width:150px}@media (max-width: 767px){.action-icons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:16px}}@media (min-width: 768px) and (max-width: 1279px){.action-icons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:16px}}.name[_ngcontent-%COMP%]{height:auto;width:870px;display:flex;justify-content:center;flex-direction:column;align-items:center;color:#ffffe0;margin-top:32px}@media (max-width: 767px){.name[_ngcontent-%COMP%]{margin-top:16px}}@media (min-width: 768px) and (max-width: 1279px){.name[_ngcontent-%COMP%]{margin-top:16px}}.time[_ngcontent-%COMP%]{height:auto;width:62px;color:#ffffe0;display:flex;justify-content:center}@media (max-width: 767px){.time[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px) and (max-width: 1279px){.time[_ngcontent-%COMP%]{display:none}}.volumen[_ngcontent-%COMP%]{height:auto;width:32px;text-align:center}@media (max-width: 767px){.volumen[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px) and (max-width: 1279px){.volumen[_ngcontent-%COMP%]{display:none}}.volumen[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px}@media (max-width: 767px){.volumen[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px) and (max-width: 1279px){.volumen[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:none}}.action-icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:28px;margin:0 8px;text-align:center;color:#ffffe0}.card-volumen[_ngcontent-%COMP%]{height:auto;width:100%;position:relative}.slide-volumen[_ngcontent-%COMP%]{width:150px;height:auto}@media (max-width: 767px){.slide-volumen[_ngcontent-%COMP%]{display:none}}@media (min-width: 768px) and (max-width: 1279px){.slide-volumen[_ngcontent-%COMP%]{display:none}}.duration[_ngcontent-%COMP%]{height:auto;width:80%;position:relative}.name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:16px}input[type=range][_ngcontent-%COMP%]{display:block;width:90%}input[type=range][_ngcontent-%COMP%]:focus{outline:none}input[type=range][_ngcontent-%COMP%], input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track, input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{background-color:#02c38a;width:21px;height:21px;border:3px solid #ddd;border-radius:50%;margin-top:-9px}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{background-color:#02c38a;width:16px;height:16px;border:3px solid #ddd;border-radius:50%}input[type=range][_ngcontent-%COMP%]::-ms-thumb{background-color:#02c38a;width:21px;height:21px;border:3px solid #ddd;border-radius:50%}input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{background-color:#333;height:5px;-webkit-appearance:none;background-image:linear-gradient(to right,#02C38A calc(var(--value) * 1%),black 0)}input[type=range][_ngcontent-%COMP%]:focus::-webkit-slider-runnable-track{outline:none}input[type=range][_ngcontent-%COMP%]::-moz-range-track{-webkit-appearance:none;background-image:linear-gradient(to right,#02C38A calc(var(--value) * 1%),black 0);height:5px}input[type=range][_ngcontent-%COMP%]::-ms-track{background-color:#02c38a;height:3px}\"]\n  });\n  return ActionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}